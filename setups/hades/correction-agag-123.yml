_layouts:

_axes:
  - &axis_protons_pT
    name: mdc_vtx_tracks_extra/pT
    bin-edges: [0.2, 0.29375, 0.35625, 0.41875, 0.48125, 0.54375, 0.61875, 0.70625, 0.81875, 1.01875, 1.5]
  - &axis_pions_pT
    name: mdc_vtx_tracks_extra/pT
    bin-edges: [0, 0.08, 0.105, 0.13, 0.155, 0.18, 0.21, 0.25, 0.315, 0.535, 1.0]
  - &axis_protons_rapidity
    name: mdc_vtx_tracks_extra/ycm
    nb: 15
    lo: -0.75
    hi: 0.75
  - &axis_pions_rapidity
    name: mdc_vtx_tracks_extra/ycm
    nb: 17
    lo: -0.65
    hi: 1.05
_cuts:
  - &protons_cuts
    mdc_vtx_tracks_extra/pid: { equals: 2212 }
  - &pi_pos_cuts
    mdc_vtx_tracks_extra/pid: { equals: 211 }
  - &pi_neg_cuts
    mdc_vtx_tracks_extra/pid: { equals: -211 }
  - &good_particle_cuts
    mdc_vtx_tracks_extra/dca_xy: {range: [-10.0, 10.0]}
    mdc_vtx_tracks_extra/dca_z: {range: [-10.0, 10.0]}
    mdc_vtx_tracks_extra/chi2: {range: [0.0, 100.0]}
  - &mf_cuts
    mdc_vtx_tracks_extra/pT: {range: [0.0, 2.0]}
    mdc_vtx_tracks_extra/rapidity: {range: [1.09, 1.29]}
  - &mb_cuts
    mdc_vtx_tracks_extra/pT: {range: [0.0, 2.0]}
    mdc_vtx_tracks_extra/rapidity: {range: [0.19, 0.39]}
  - &r1_cuts
    forward_wall_hits/rnd_sub: { equals: 0 }
    forward_wall_hits/time: { range: [22.681788, 28.352235] }
    forward_wall_hits/signal: { range: [80.0, 999.0] }
  - &r2_cuts
    forward_wall_hits/rnd_sub: { equals: 1 }
    forward_wall_hits/time: { range: [22.681788, 28.352235] }
    forward_wall_hits/signal: { range: [80.0, 999.0] }
  - &w1_cuts
    forward_wall_hits/ring: { range: [1.0, 5.0] }
    forward_wall_hits/time: { range: [22.681788, 27.002128] }
    forward_wall_hits/signal: { range: [80.0, 999.0] }
  - &w2_cuts
    forward_wall_hits/ring: { range: [6.0, 7.0] }
    forward_wall_hits/time: { range: [22.681788, 26.684456] }
    forward_wall_hits/signal: { range: [85.0, 999.0] }
  - &w3_cuts
    forward_wall_hits/ring: { range: [8.0, 10.0] }
    forward_wall_hits/time: { range: [22.681788, 28.352235] }
    forward_wall_hits/signal: { range: [88.0, 999.0] }

hades_analysis:
  event-variables:
    - event_header_extra/selected_tof_rpc_hits_centrality
  axes:
    - { name: event_header_extra/selected_tof_rpc_hits_centrality, nb: 8, lo: 0.0, hi: 40 }
  q-vectors:
    - name: protons
      type: track
      phi:  mdc_vtx_tracks_extra/phi
      weight: mdc_vtx_tracks_extra/efficiency
      norm: m
      corrections:
        - recentering
        - twist-and-rescale
      axes:
        - *axis_protons_pT
        - *axis_protons_rapidity
      cuts-pid:
        *protons_cuts
      cuts-quality:
        *good_particle_cuts
      qa:
        - {name: mdc_vtx_tracks_extra/phi, nb: 100, lo: -4., hi: 4.}
        - *axis_protons_pT
        - *axis_protons_rapidity
        - [*axis_protons_rapidity, *axis_protons_pT]
    - name: pi_pos
      type: track
      phi:  mdc_vtx_tracks_extra/phi
      weight: mdc_vtx_tracks_extra/efficiency
      norm: m
      corrections:
        - recentering
        - twist-and-rescale
      axes:
        - *axis_pions_pT
        - *axis_pions_rapidity
      cuts-pid:
        *pi_pos_cuts
      cuts-quality:
        *good_particle_cuts
      qa:
        - {name: mdc_vtx_tracks_extra/phi, nb: 100, lo: -4., hi: 4.}
        - *axis_pions_pT
        - *axis_pions_rapidity
        - [*axis_pions_rapidity, *axis_pions_pT]
#    - name: pi_neg
#      type: track
#      phi:  mdc_vtx_tracks_extra/phi
#      weight: mdc_vtx_tracks_extra/efficiency
#      norm: m
#      corrections:
#        - recentering
#        - twist-and-rescale
#      axes:
#        - *axis_pions_pT
#        - *axis_pions_rapidity
#      cuts-pid:
#        *pi_neg_cuts
#      cuts-quality:
#        *good_particle_cuts
#      qa:
#        - {name: mdc_vtx_tracks_extra/phi, nb: 100, lo: -4., hi: 4.}
#        - *axis_pions_pT
#        - *axis_pions_rapidity
#        - [*axis_pions_rapidity, *axis_pions_pT]
    - name: Mf
      type: track
      phi:  mdc_vtx_tracks_extra/phi
      weight: Ones
      norm: m
      corrections:
        - recentering
        - twist-and-rescale
      cuts-subevent:
        *mf_cuts
      cuts-quality:
        *good_particle_cuts
      cuts-pid:
        *protons_cuts
      qa:
        - {name: mdc_vtx_tracks_extra/phi, nb: 100, lo: -4., hi: 4.}
    - name: Mb
      type: track
      phi:  mdc_vtx_tracks_extra/phi
      weight: Ones
      norm: m
      corrections:
        - recentering
        - twist-and-rescale
      cuts-subevent:
        *mb_cuts
      cuts-quality:
        *good_particle_cuts
      cuts-pid:
        *protons_cuts
      qa:
        - {name: mdc_vtx_tracks_extra/phi, nb: 100, lo: -4., hi: 4.}
#    - name: R1
#      type: track
#      phi:  forward_wall_hits/phi
#      weight: forward_wall_hits/signal
#      norm: m
#      corrections:
#        - recentering
#        - twist-and-rescale
#      cuts:
#        *r1_cuts
#    - name: R2
#      type: track
#      phi:  forward_wall_hits/phi
#      weight: forward_wall_hits/signal
#      norm: m
#      corrections:
#        - recentering
#        - twist-and-rescale
#      cuts:
#        *r2_cuts
    - name: W1
      type: track
      phi:  forward_wall_hits/phi
      weight: forward_wall_hits/signal
      norm: m
      corrections:
        - recentering
        - twist-and-rescale
      cuts:
        *w1_cuts
    - name: W2
      type: track
      phi:  forward_wall_hits/phi
      weight: forward_wall_hits/signal
      norm: m
      corrections:
        - recentering
        - twist-and-rescale
      cuts:
        *w2_cuts
    - name: W3
      type: track
      phi:  forward_wall_hits/phi
      weight: forward_wall_hits/signal
      norm: m
      corrections:
        - recentering
        - twist-and-rescale
      cuts:
        *w3_cuts