_detectors: &detectors
  - name: protons
    tags: [ un_vector ]
  - name: pi_pos
    tags: [ un_vector ]
  - name: pi_neg
    tags: [ un_vector ]
  - name: W1
    tags: [ qn_vector ]
  - name: W2
    tags: [ qn_vector ]
  - name: W3
    tags: [ qn_vector ]
  - name: Mf
    tags: [ qn_vector, mdc ]
  - name: Mb
    tags: [ qn_vector, mdc ]

_axes:
  - &centrality
    name: event_header_selected_tof_rpc_hits_centrality
    nb: 12
    lo: 0
    hi: 60

_components:
  - &sp_components
    [ x1,y1 ]
  - &sp2_components
    [ x2,y2 ]
  - &ep_components
    [ cos1,sin1 ]

_tasks_args:
  - &ta_u
    query: { tags: { any-in: [ un_vector ] } }
    query-list: *detectors
    components: *sp_components
    correction-steps: [ plain ]
    weight: sumw
  - &ta_u2
    query: { tags: { any-in: [ un_vector ] } }
    query-list: *detectors
    components: *sp2_components
    correction-steps: [ plain ]
    weight: sumw
  - &ta_qn_sp
    query: { tags: { any-in: [ qn_vector ] } }
    query-list: *detectors
    components: *sp_components
    correction-steps: [ plain ]
    weight: ones
  - &ta_qn_ep
    query: { tags: { any-in: [ qn_vector ] } }
    query-list: *detectors
    components: *ep_components
    correction-steps: [ plain ]
    weight: ones
  - &ta_rnd_sp
    query: { tags: { any-in: [ rnd_vector ] } }
    query-list: *detectors
    components: *sp_components
    correction-steps: [ plain ]
    weight: ones
  - &ta_rnd_ep
    query: { tags: { any-in: [ rnd_vector ] } }
    query-list: *detectors
    components: *ep_components
    correction-steps: [ plain ]
    weight: ones

_tasks:
  # Checks 
#  - args: [*ta_u]
#    n-samples: 100
#    weights-type: observable
#    folder: "/checks/u1"
#    axes: [ *centrality ]
#  - args: [*ta_u2]
#    n-samples: 100
#    weights-type: observable
#    folder: "/checks/u2"
#    axes: [ *centrality ]
#   Scalar product
  - args: [*ta_u, *ta_qn_sp]
    n-samples: 100
    weights-type: observable
    folder: "/SP/u1Q1"
    axes: [ *centrality ]
#  - args: [*ta_u2, *ta_qn_sp, *ta_qn_sp]
#    n-samples: 100
#    weights-type: observable
#    folder: "/SP/u2Q1Q1"
#    axes: [ *centrality ]
  - args: [*ta_qn_sp, *ta_qn_sp]
    n-samples: 100
    weights-type: reference
    folder: "/SP/Q1Q1"
    axes: [ *centrality ]
  # Event plane
#  - args: [*ta_u, *ta_qn_ep]
#    n-samples: 100
#    weights-type: observable
#    folder: "/EP/u1Q1"
#    axes: [ *centrality ]
#  - args: [*ta_u2, *ta_qn_ep, *ta_qn_ep]
#    n-samples: 100
#    weights-type: observable
#    folder: "/EP/u2Q1Q1"
#    axes: [ *centrality ]
#  - args: [*ta_qn_ep, *ta_qn_ep]
#    n-samples: 100
#    weights-type: reference
#    folder: "/EP/Q1Q1"
#    axes: [ *centrality ]